<!-- Cadastrar um novo pedido -->
<?php
  include_once './config.php';

  $titulo = "Abelha Rainha";

  $home = "nav-link";
$ar = "nav-link active";
$av = "nav-link";
$eu = "nav-link";
$na = "nav-link";

  include CABECALHO;
?>
<h1>Cosméticos Abelha Rainha - Novo Pedido</h1>
<hr>

<?php
  if(isset($_POST['saveInfo'])) {
    $ano = $_POST['ano'];
    $mes = $_POST['mes'];
    $vendedor = $_POST['nome_vendedor'];
    $cliente = $_POST['nome_cliente'];
?> 
<form>
  <h2>Dados Vendedor(a) / Cliente</h2>
  <!-- Informações da venda -->
  <div class="form-row">
    <!-- Selecionar o ano da venda -->
    <div class="form-group col-md-auto">
      Selecione o ano: 
      <input type="text" class="form-control" id="ano" name="ano" value="<?= $ano; ?>" readonly>
    </div>
    
    <!--Selecionar o mês da venda -->
    <div class="form-group col-md-auto">
      Selecione o mês: 
      <input type="text" class="form-control" id="nome_vendedor" name="nome_vendedor" value="<?= $mes; ?>" readonly>
    </div>
    
    <!-- Digitar o nome do(a) vendedor(a) -->
    <div class="form-group col-md-auto">
      Digite o nome do(a) vendedor(a):
      <input type="text" class="form-control" id="nome_vendedor" name="nome_vendedor" value="<?= $vendedor; ?>" readonly>
    </div>

    <!-- Digitar o nome do(a) cliente -->
    <div class="form-group col-md-auto">
      Digite o nome do(a) cliente:
      <input type="text" class="form-control" id="nome_cliente" name="nome_cliente" value="<?= $cliente; ?>" readonly>
    </div>

    <div class="form-group col text-rigth align-bottom">
      <button type="submit" class="form-control btn btn-primary" name="saveInfo">Continuar</button>
    </div>
  </div>
</form>
<?php } else { ?>
  <form method="POST">
    <h2>Dados Vendedor(a) / Cliente</h2>
    <!-- Informações da venda -->
    <div class="form-row">
      <!-- Selecionar o ano da venda -->
      <div class="form-group col-md-auto">
        Selecione o ano: 
        <input type="text" class="form-control" id="ano" name="ano" value="<?= date('Y'); ?>">
      </div>

      <!--Selecionar o mês da venda -->
      <div class="form-group col-md-auto">
        Selecione o mês: 
        <select class="form-control" id="mes" name="mes">
          <?php
            function gerarMes($mes){
              switch($mes){
                case 1:
                  return "Janeiro";
                case 2:
                  return "Fevereiro";
                case 3:
                  return "Março";
                case 4:
                  return "Abril";
                case 5:
                  return "Maio";
                case 6:
                  return "Junho";
                case 7:
                  return "Julho";
                case 8:
                  return "Agosto";
                case 9:
                  return "Setembro";
                case 10:
                  return "Outubro";
                case 11:
                  return "Novembro";
                case 12:
                  return "Dezembro";
              }
            }
            $m = date('m');
            for($i = 1; $i <= $m; $i++){
              $mes1 = gerarMes($i);
              echo "<option value='" . $mes1 . "'>" . $mes1 . "</option>";
            }
          ?>
        </select>
      </div>

      <!-- Digitar o nome do(a) vendedor(a) -->
      <div class="form-group col-md-auto">
        Digite o nome do(a) vendedor(a):
        <input type="text" class="form-control" id="nome_vendedor" name="nome_vendedor" placeholder="Vendedor(a)">
      </div>

      <!-- Digitar o nome do(a) cliente -->
      <div class="form-group col-md-auto">
        Digite o nome do(a) cliente:
        <input type="text" class="form-control" id="nome_cliente" name="nome_cliente" placeholder="Cliente">
      </div>

      <div class="form-group col text-rigth align-bottom">
        <button type="submit" class="form-control btn btn-primary" name="saveInfo">Continuar</button>
      </div>
    </div>
  </form>
<?php } ?>
  <hr>

  <div class="row">
    <div class="col-md-6">
      <h2>Dados do Produto</h2>
    </div>
    <div class="col-md-6 text-right">
      <button type="button" class="btn btn-primary" onclick="adicionarProduto()">Adicionar Produto</button>
    </div>
  </div>
<form>
  <!-- Produtos -->
  <div class="row">
    <!-- Digite o código do produto -->
    <div class="form-group col-md-1">
      Cód:
      <input type="text" class="form-control" id="cod_produto" name="cod_produto" placeholder="Cód" onblur="carregaDescr()">
    </div>

    <!-- A descrição será de acordo com o código do produto -->
    <div class="form-group col-md-6">
      Descrição:
      <?php
       if(isset($_POST['carregaDesc'])) {
          $xml = simplexml_load_file('./views/abelha_rainha/produtos.xml');
          foreach($xml->produto as $produto):
            if($cod == $produto->codigo){
              ?>
              <input type="text" class="form-control" id="produto" name="produto" value="<?= $produto->descricao; ?>" readonly>
              <?php
            }
          endforeach;
        } else { ?>
          <input type="text" class="form-control" id="produto" name="produto" placeholder="Descrição" readonly>
       <?php } ?>
    </div>

    <!-- Digite a quantidade do produto -->
    <div class="form-group col-md-1">
      Qtde:
      <input type="text" class="form-control" id="qtde_produto" name="qtde_produto" placeholder="Qtde">
    </div>

    <!-- o valor unitário será de acordo com o código do produto -->
    <div class="form-group col-md-2">
      Valor Unit.:
      <input type="text" class="form-control" id="unit_produto" name="unit_produto" placeholder="R$ 0,00" readonly>
    </div>

    <!-- o valor total será de acordo com a qtde e valor unitario -->
    <div class="form-group col-md-2">
      Valor Total:
      <input type="text" class="form-control" id="total_produto" name="total_produto" placeholder="R$ 0,00" readonly>
    </div>
  </div>
  
</form>

<hr>

<!-- Tabela de itens da venda -->
<table class="table table-striped table-bordered" width="100%">
  <thead class="thead-dark">
    <tr>
      <th class="text-center align-middle" width="5%">Cód</th>
      <th class="text-center align-middle" width="74%">Descrição</th>
      <th class="text-center align-middle" width="3%">Qtde</th>
      <th class="text-center align-middle" width="9%">Valor Unit.</th>
      <th class="text-center align-middle" width="9%">Total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0001</td>
      <td>...</td>
      <td class="text-center">1</td>
      <td class="text-justify">R$ 00,00</td>
      <td class="text-justify">R$ 000,00</td>
    </tr>
  </tbody>
</table>

<?= include RODAPE; ?>